// AUTHOR: HUDSON GREEN
// CONTRIBUTORS: N/A

class CustomCursor : ZilchComponent {
    
    [Property] var DefaultCursor : SpriteSource = SpriteSource.Cursor;
    [Property] var HoverCursor : SpriteSource = SpriteSource.Cursor;
    [Property] var HoverItemCursor : SpriteSource = SpriteSource.Cursor;
    [Property] var ClickCursor : SpriteSource = SpriteSource.Cursor;
    
    [Property] var ShowCustomCursor : Boolean = true;
    
    function Initialize(init : CogInitializer) {
        Zero.Connect(this.Space, Events.MouseMove, this.OnMouseMove);
    }
    
    function OnMouseMove(event : ViewportMouseEvent) {
        
        var mousePos = this.Space.FindObjectByName("LevelSettings").CameraViewport.ScreenToWorldZPlane(Zero.Mouse.ScreenPosition, 30.0);
        
        this.Owner.Transform.WorldTranslation = mousePos;
        
        if(this.ShowCustomCursor) {
            
            event.Mouse.Cursor = Cursor.Invisible;
            this.Owner.Sprite.Visible = true;
            
            if(Relocation.CursorType == "Hover") {
                this.Owner.Sprite.SpriteSource = this.HoverCursor;
            } else if(Relocation.CursorType == "ItemHover") {
                this.Owner.Sprite.SpriteSource = this.HoverItemCursor;
            } else if(Relocation.CursorType == "Click") {
                this.Owner.Sprite.SpriteSource = this.ClickCursor;
            } else {
                this.Owner.Sprite.SpriteSource = this.DefaultCursor;
            }
            
        } else {
            
            event.Mouse.Cursor = Cursor.Cross;
            this.Owner.Sprite.Visible = false;
            
        }
        
    }
    
}
